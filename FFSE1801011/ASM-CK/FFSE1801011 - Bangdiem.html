<pre>
<script>
let name=[];subject=[];
let mark=[[],[]];
    name [0]=("Nguyen An")
    name [1]=("Tran Dan")
    name [2]=("Nguyen Dat")
    name [3]=("Thieu Diep")
    name [4]=("Phan Dinh")
    name [5]=("Nguyen Duc")
    
    subject[0]= ("Mon Toan " );
    subject[1]= ("Mon Ly \t " );
    subject[2]= ("Mon Hoa " );
    /*subject[3]= ("Mon Van " );
    subject[4]= ("Mon Su " );
    subject[5]= ("Mon Dia " );
    subject[6]= ("Mon Anh " );
    subject[7]= ("Mon Cong nghe " );
    subject[8]= ("Mon GDCD " );*/

    mark=[//Lớp tên
            [//Lớp môn học
                [5,6,4,-1,7,9], //Lớp điểm
                [8,7,9,10,8,9],
                [7,5,9,9,-1,8],
            ],
            [
                [-1,5,7,8,8,8],
                [5,-1,-1,-1,8,8],
                [7,8,9,10,8,9],
            ],
            [
                [7,6,8,9,10,10],
                [7,7,-1,-1,9,9],
                [9,9,8,7,10,8],
            ],
            [
                [5,9,8,5,7,8],
                [5,7,9,4,6,6],
                [5,3,7,9,9,9],
            ],
            [
                [5,9,8,5,7,8],
                [5,7,9,4,6,6],
                [5,3,7,9,5,6],
            ],
            [
                [5,9,8,5,7,5],
                [5,0,0,4,4,4],
                [6,4,4,7,5,5],
            ],
        ]
function sbjavg(arr){
    let c=0; s=0;avg=0      //Khoi tao bien dem c, tong s, average BEN NGOAI FOR
    for (let i = 5; i > -1; i--) {
        if (arr[i]<0){      //Dem so lan thieu diem thi
            if (i>3){       //Xet co phai thieu diem HS 2 va 3 hay ko
                return -1;
                break;
            } else {c++}
        }
        else if (i==5){s=s+arr[i]*3}
            else if (i==4){s=s+arr[i]*2}
                else {s=s+arr[i]}
        }
        if (c>2){return -1}
        else {avg=s/(arr.length-c+3);
        return avg}
    }
function semavg(i,sbj,mrk){
    let s=0; avg=0; x=true;  
    for (let j=0;j<sbj.length;j++){
        if (mrk[i][j][6]<0){x= false; break;} 
        else {s=s+mrk[i][j][6]}}
        if (x==false){return "Khong du DK tong ket"} 
        else {avg=s/sbj.length;
            if (avg<5){return "Khong dat"}
            else {if (avg<6.5) {
                    return "Dat"
                } else {
                    if (avg<8){
                        return "Kha"
                    } else {return "Gioi"}
                }
            }
        }
    }

for (let i = 0; i < name.length; i++) {
    document.write("Ho va ten: "+name[i]+"<hr> \t \t Diem HS 1 \t Diem HS 2 \t Diem hoc ky \t Diem tong ket \t"+"</br>"); //In row header 
    for (let j=0;j< subject.length;j++){            //In subject name column
    document.write(subject[j] + "\t");
        for (let k = 0; k < 7; k++) {   //Không thể thay 7 bằng mark[i][j].length vì sẽ lặp vô tận
            if(k < 4) {document.write(mark[i][j][k] + ", ")}
                else if (k<6) {document.write("\t \t"+mark[i][j][k])}
                    else {mark[i][j][k]=sbjavg(mark[i][j]); //Mảng mark[i][j] chưa bao gồm phần tử k cuối cùng này
                        if (mark[i][j][k]!=-1){document.write("\t \t"+ parseFloat(mark[i][j][k]).toFixed(1))}
                        else {document.write("\t Khong du DK tong ket")}
                    }
        }document.write("</br>");
        
    }document.write("Ket qua hoc ky: ");
    document.write(semavg(i,subject,mark)+"<br>" + "<br>");
}
</script>
</pre>